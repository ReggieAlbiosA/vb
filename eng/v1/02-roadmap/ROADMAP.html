<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>vb — Roadmap (Restructured)</title>

  <style>
    @import url("https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Syne:wght@400;600;700;800&display=swap");

    :root {
      --bg: #0d0d0f;
      --surface: #111114;
      --border: #1e1e26;
      --accent: #00ff87;
      --accent2: #0ff;
      --accent3: #ff6b35;
      --accent4: #a78bfa;
      --text: #e8e8ed;
      --muted: #52526a;
      --mono: "JetBrains Mono", monospace;
      --sans: "Syne", sans-serif;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: var(--sans);
      line-height: 1.6;
      padding: 56px 40px;
    }

    th in the spec block — too terse In the Dot Config spec block,
    knowledge_path is listed as a bare config key with no explanation of what it actually controls. Given that it's architecturally significant — it' s the decoupling mechanism between .vb/ marker and topic storage — it deserves a brief .container {
      max-width: 900px;
      margin: 0 auto;
    }

    .header {
      border-bottom: 1px solid var(--border);
      padding-bottom: 40px;
      margin-bottom: 56px;
    }

    .tag {
      font-family: var(--mono);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--accent4);
      border: 1px solid rgba(167, 139, 250, 0.3);
      padding: 3px 10px;
      display: inline-block;
      margin-bottom: 20px;
    }

    h1 {
      font-size: 52px;
      font-weight: 800;
      letter-spacing: -0.04em;
      line-height: 1;
    }

    h1 .accent {
      color: var(--accent);
    }

    .header-sub {
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
      margin-top: 10px;
    }

    .section {
      margin-bottom: 64px;
    }

    .section-title {
      font-family: var(--mono);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 14px;
      margin-bottom: 32px;
    }

    .section-title::after {
      content: "";
      flex: 1;
      height: 1px;
      background: var(--border);
    }

    .phase-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 32px;
      margin-bottom: 24px;
      position: relative;
      overflow: hidden;
    }

    .phase-num {
      position: absolute;
      top: -10px;
      right: 10px;
      font-size: 80px;
      font-weight: 800;
      color: rgba(255, 255, 255, 0.02);
      pointer-events: none;
    }

    .phase-label {
      font-family: var(--mono);
      font-size: 10px;
      color: var(--accent2);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      margin-bottom: 8px;
    }

    .phase-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 24px;
    }

    .step-list {
      list-style: none;
    }

    .step-item {
      font-family: var(--mono);
      font-size: 12px;
      color: #b0b0c8;
      padding: 12px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.03);
      display: grid;
      grid-template-columns: 24px 1fr;
      gap: 12px;
    }

    .step-item:last-child {
      border-bottom: none;
    }

    .step-bullet {
      color: var(--accent);
      font-weight: bold;
    }

    .step-details strong {
      color: var(--text);
    }

    .step-details code {
      background: #1a1a22;
      padding: 2px 5px;
      border-radius: 3px;
      color: var(--accent2);
      font-size: 11px;
    }

    .validation {
      margin-top: 20px;
      background: rgba(0, 255, 135, 0.03);
      border: 1px dashed rgba(0, 255, 135, 0.2);
      padding: 16px 20px;
      border-radius: 4px;
      font-family: var(--mono);
      font-size: 11px;
      color: #7070a0;
    }

    footer {
      margin-top: 72px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
      font-family: var(--mono);
      font-size: 10px;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <div class="tag">Architecture First</div>
      <h1><span class="accent">vb</span> — Roadmap</h1>
      <p class="header-sub">
        Layered Execution Plan · Deterministic CLI Core
      </p>
    </div>

    <!-- PHASE 1 -->
    <div class="section">
      <div class="section-title">Phase 01 · Core Infrastructure</div>
      <div class="phase-card">
        <div class="phase-num">01</div>
        <div class="phase-label">Foundation Layer</div>
        <div class="phase-title">
          CLI Skeleton · Vault Discovery · Index Engine
        </div>

        <ul class="step-list">
          <li class="step-item">
            <span class="step-bullet">01</span>
            <div class="step-details">
              <strong>Project Bootstrap:</strong> Setup Go module, Cobra root
              command, Viper config wiring.
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">02</span>
            <div class="step-details">
              <strong><code>vb init</code>:</strong> Create <code>.vb/</code> directory and default
              <code>config.toml</code> with <code>knowledge_path = "."</code> — topics live alongside <code>.vb/</code>
              by default, but can be pointed anywhere.
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">03</span>
            <div class="step-details">
              <strong>Upward Vault Resolver:</strong> Two-stage resolution — (1) walk parent directories to find
              <code>.vb/</code> marker, (2) read <code>knowledge_path</code> from <code>config.toml</code> to locate
              actual topic folders (may differ from vault root).
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">04</span>
            <div class="step-details">
              <strong>Index Engine:</strong> Generate and maintain
              <code>index.json</code> for deterministic topic resolution.
            </div>
          </li>
        </ul>

        <div class="validation">
          ✔ Validate: init vault → reindex → confirm deterministic topic
          lookup.
        </div>
      </div>
    </div>

    <!-- PHASE 2 -->
    <div class="section">
      <div class="section-title">Phase 02 · Resolution Engine</div>
      <div class="phase-card">
        <div class="phase-num">02</div>
        <div class="phase-label">Deterministic Mapping</div>
        <div class="phase-title">Topic → Lens → File Binding</div>

        <ul class="step-list">
          <li class="step-item">
            <span class="step-bullet">01</span>
            <div class="step-details">
              <strong>Topic Resolver:</strong> Use <code>index.json</code> for fast folder mapping — index is built and
              scoped against <code>knowledge_path</code>, not the vault root.
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">02</span>
            <div class="step-details">
              <strong>Flag Mapping:</strong> <code>--why</code> → WHY.md,
              <code>--arch</code> → ARCH.md, etc.
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">03</span>
            <div class="step-details">
              <strong>Strict File Validation:</strong> Clear errors if lens
              file missing.
            </div>
          </li>
        </ul>

        <div class="validation">
          ✔ Validate: Query existing + non-existing lens files.
        </div>
      </div>
    </div>

    <!-- PHASE 3 -->
    <div class="section">
      <div class="section-title">Phase 03 · Rendering Layer</div>
      <div class="phase-card">
        <div class="phase-num">03</div>
        <div class="phase-label">Output Abstraction</div>
        <div class="phase-title">
          Markdown Parsing & Styled Terminal Output
        </div>

        <ul class="step-list">
          <li class="step-item">
            <span class="step-bullet">01</span>
            <div class="step-details">
              <strong>Goldmark Parser:</strong> Parse vault markdown into AST.
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">02</span>
            <div class="step-details">
              <strong>Glamour Render:</strong> Styled terminal markdown
              output.
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">03</span>
            <div class="step-details">
              <strong>Lip Gloss Themes:</strong> Visual identity per lens.
            </div>
          </li>
        </ul>

        <div class="validation">
          ✔ Validate: Styled output differs per lens but resolution unchanged.
        </div>
      </div>
    </div>

    <!-- PHASE 4 -->
    <div class="section">
      <div class="section-title">Phase 04 · Write Loop</div>
      <div class="phase-card">
        <div class="phase-num">04</div>
        <div class="phase-label">Authoring System</div>
        <div class="phase-title">Editor Integration & Command Logging</div>

        <ul class="step-list">
          <li class="step-item">
            <span class="step-bullet">01</span>
            <div class="step-details">
              <strong><code>vb edit</code>:</strong> Launch $EDITOR via
              os/exec.
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">02</span>
            <div class="step-details">
              <strong><code>--used</code> Engine:</strong> Append timestamped
              command entries.
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">03</span>
            <div class="step-details">
              <strong>Tag Search:</strong> Cross-topic tag lookup.
            </div>
          </li>
        </ul>

        <div class="validation">
          ✔ Validate: Log commands → re-query → search by tag.
        </div>
      </div>
    </div>

    <!-- PHASE 5 -->
    <div class="section">
      <div class="section-title">Phase 05 · Schema Enforcement</div>
      <div class="phase-card">
        <div class="phase-num">05</div>
        <div class="phase-label">Quality Control</div>
        <div class="phase-title">Lens-Aware Markdown Linter</div>

        <ul class="step-list">
          <li class="step-item">
            <span class="step-bullet">01</span>
            <div class="step-details">
              <strong><code>vb lint</code>:</strong> AST inspection via
              Goldmark.
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">02</span>
            <div class="step-details">
              <strong>Lens Rules:</strong> Enforce schema per file type.
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">03</span>
            <div class="step-details">
              <strong>Auto-Lint Hook:</strong> Optional lint on save.
            </div>
          </li>
        </ul>

        <div class="validation">
          ✔ Validate: Break file intentionally → clear structured error.
        </div>
      </div>
    </div>

    <!-- PHASE 6 -->
    <div class="section">
      <div class="section-title">Phase 06 · GUI Modifier</div>
      <div class="phase-card">
        <div class="phase-num">06</div>
        <div class="phase-label">Optional Visual Layer</div>
        <div class="phase-title">Webview & Mermaid Rendering</div>

        <ul class="step-list">
          <li class="step-item">
            <span class="step-bullet">01</span>
            <div class="step-details">
              <strong>Wails/Lorca Bridge:</strong> Isolated GUI adapter.
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">02</span>
            <div class="step-details">
              <strong><code>--gui</code> Router:</strong> Divert output from
              terminal to webview.
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">03</span>
            <div class="step-details">
              <strong>Mermaid Loader:</strong> Render ARCH.mmd dynamically.
            </div>
          </li>
        </ul>

        <div class="validation">
          ✔ Validate: GUI renders; no-display gracefully falls back to
          terminal.
        </div>
      </div>
    </div>

    <!-- PHASE 7 -->
    <div class="section">
      <div class="section-title">Phase 07 · Distribution</div>
      <div class="phase-card">
        <div class="phase-num">07</div>
        <div class="phase-label">Ship Layer</div>
        <div class="phase-title">
          Completions · Binaries · Release Automation
        </div>

        <ul class="step-list">
          <li class="step-item">
            <span class="step-bullet">01</span>
            <div class="step-details">
              <strong>Shell Completion:</strong> Generate bash/zsh/fish
              scripts.
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">02</span>
            <div class="step-details">
              <strong>GoReleaser:</strong> Cross-platform builds.
            </div>
          </li>

          <li class="step-item">
            <span class="step-bullet">03</span>
            <div class="step-details">
              <strong>Auto Docs:</strong> Generate usage docs from Cobra.
            </div>
          </li>
        </ul>

        <div class="validation">
          ✔ Validate: Snapshot build produces working binaries.
        </div>
      </div>
    </div>

    <footer>
      <span>vb · layered architecture roadmap</span>
      <span>v1.1 · deterministic core</span>
    </footer>
  </div>
</body>

</html>